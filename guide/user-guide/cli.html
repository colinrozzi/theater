<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CLI - Theater Docs</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../css/custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Theater Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/colinrozzi/theater" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/colinrozzi/theater/edit/main/book/src/user-guide/cli.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="theater-cli"><a class="header" href="#theater-cli">Theater CLI</a></h1>
<p>The Theater CLI is a command-line tool that provides a convenient interface for working with the Theater WebAssembly actor system. It simplifies actor development, deployment, and management.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>The Theater CLI is included when you build the Theater project:</p>
<pre><code class="language-bash"># Build the project
cargo build --release

# Use the CLI directly
./target/release/theater --help

# Or add it to your PATH for easier access
</code></pre>
<h2 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h2>
<pre><code class="language-bash"># Get help
theater --help

# Run commands with verbose output
theater -v &lt;command&gt;

# Get output in JSON format (for scripting)
theater --json &lt;command&gt;
</code></pre>
<h2 id="command-overview"><a class="header" href="#command-overview">Command Overview</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody>
<tr><td><code>build</code></td><td>Build a Theater actor to WebAssembly</td></tr>
<tr><td><code>create</code></td><td>Create a new Theater actor project</td></tr>
<tr><td><code>events</code></td><td>Get actor events</td></tr>
<tr><td><code>inspect</code></td><td>Show detailed information about an actor</td></tr>
<tr><td><code>list</code></td><td>List all running actors</td></tr>
<tr><td><code>logs</code></td><td>View actor logs</td></tr>
<tr><td><code>message</code></td><td>Send a message to an actor</td></tr>
<tr><td><code>restart</code></td><td>Restart a running actor</td></tr>
<tr><td><code>server</code></td><td>Start a Theater server</td></tr>
<tr><td><code>shell</code></td><td>Start an interactive shell</td></tr>
<tr><td><code>start</code></td><td>Start an actor from a manifest</td></tr>
<tr><td><code>state</code></td><td>Get actor state</td></tr>
<tr><td><code>stop</code></td><td>Stop a running actor</td></tr>
<tr><td><code>tree</code></td><td>Show actor hierarchy as a tree</td></tr>
<tr><td><code>validate</code></td><td>Validate an actor manifest</td></tr>
<tr><td><code>watch</code></td><td>Watch a directory and redeploy on changes</td></tr>
</tbody></table>
</div>
<h2 id="detailed-command-usage"><a class="header" href="#detailed-command-usage">Detailed Command Usage</a></h2>
<h3 id="creating-a-new-actor-project"><a class="header" href="#creating-a-new-actor-project">Creating a New Actor Project</a></h3>
<pre><code class="language-bash"># Create a basic actor project
theater create my-actor

# Create an HTTP actor project
theater create my-http-actor --template http

# Create a project in a specific directory
theater create my-actor --output-dir ~/projects
</code></pre>
<h3 id="building-a-theater-actor"><a class="header" href="#building-a-theater-actor">Building a Theater Actor</a></h3>
<pre><code class="language-bash"># Build the actor in the current directory
theater build

# Build a specific project
theater build /path/to/project

# Build in debug mode
theater build --release false

# Clean and rebuild
theater build --clean
</code></pre>
<h3 id="managing-a-theater-server"><a class="header" href="#managing-a-theater-server">Managing a Theater Server</a></h3>
<pre><code class="language-bash"># Start a server with default settings
theater server

# Start a server with a custom port
theater server --port 9001

# Start a server with a custom data directory
theater server --data-dir /path/to/data
</code></pre>
<h3 id="running-actors"><a class="header" href="#running-actors">Running Actors</a></h3>
<pre><code class="language-bash"># Start an actor from a manifest
theater start path/to/manifest.toml

# Start an actor and output only its ID (useful for piping)
theater start path/to/manifest.toml --id-only

# Start an actor and monitor its events
theater start path/to/manifest.toml --monitor

# List all running actors
theater list

# View actor logs
theater logs &lt;actor-id&gt;

# Get actor state
theater state &lt;actor-id&gt;

# Get actor events
theater events &lt;actor-id&gt;

# Stop an actor
theater stop &lt;actor-id&gt;

# Restart an actor
theater restart &lt;actor-id&gt;

# Subscribe to actor events
theater subscribe &lt;actor-id&gt;

# Start an actor and subscribe to its events (piping commands)
theater start path/to/manifest.toml --id-only | theater subscribe -
</code></pre>
<h3 id="development-workflow"><a class="header" href="#development-workflow">Development Workflow</a></h3>
<pre><code class="language-bash"># Create a new actor project
theater create my-actor

# Build the actor
cd my-actor
theater build

# Start the actor and monitor its events
theater start manifest.toml --monitor

# Or, start without monitoring
theater start manifest.toml

# Watch the directory and redeploy on changes
theater watch . --manifest manifest.toml
</code></pre>
<h3 id="sending-messages-to-actors"><a class="header" href="#sending-messages-to-actors">Sending Messages to Actors</a></h3>
<pre><code class="language-bash"># Send a JSON message to an actor
theater message &lt;actor-id&gt; --data '{"action": "doSomething", "value": 42}'

# Send a message from a file
theater message &lt;actor-id&gt; --file message.json
</code></pre>
<h2 id="output-formats"><a class="header" href="#output-formats">Output Formats</a></h2>
<p>The Theater CLI supports human-readable output (default) and JSON output for scripting:</p>
<pre><code class="language-bash"># Human-readable output
theater list

# JSON output
theater --json list
</code></pre>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<p>The Theater CLI respects the following environment variables:</p>
<ul>
<li><code>THEATER_SERVER_ADDRESS</code>: Default server address (host:port)</li>
<li><code>THEATER_DATA_DIR</code>: Default data directory location</li>
</ul>
<h2 id="common-workflows"><a class="header" href="#common-workflows">Common Workflows</a></h2>
<h3 id="develop-build-and-run-loop"><a class="header" href="#develop-build-and-run-loop">Develop, Build, and Run Loop</a></h3>
<ol>
<li>
<p>Create a new actor project</p>
<pre><code class="language-bash">theater create my-actor
cd my-actor
</code></pre>
</li>
<li>
<p>Build the actor</p>
<pre><code class="language-bash">theater build
</code></pre>
</li>
<li>
<p>Start a Theater server (in another terminal)</p>
<pre><code class="language-bash">theater server
</code></pre>
</li>
<li>
<p>Start the actor</p>
<pre><code class="language-bash">theater start manifest.toml
</code></pre>
</li>
<li>
<p>Watch for changes and automatically redeploy</p>
<pre><code class="language-bash">theater watch . --manifest manifest.toml
</code></pre>
</li>
</ol>
<h3 id="monitoring-and-debugging"><a class="header" href="#monitoring-and-debugging">Monitoring and Debugging</a></h3>
<p>To monitor and debug actors:</p>
<ol>
<li>
<p>List all running actors</p>
<pre><code class="language-bash">theater list
</code></pre>
</li>
<li>
<p>View actor logs</p>
<pre><code class="language-bash">theater logs &lt;actor-id&gt;
</code></pre>
</li>
<li>
<p>Inspect actor state</p>
<pre><code class="language-bash">theater state &lt;actor-id&gt;
</code></pre>
</li>
<li>
<p>View actor events</p>
<pre><code class="language-bash">theater events &lt;actor-id&gt;
</code></pre>
</li>
<li>
<p>Monitor actor events in real-time</p>
<pre><code class="language-bash"># When starting a new actor
theater start manifest.toml --monitor

# Or use the subscribe command
theater subscribe &lt;actor-id&gt;

# Or pipe commands together for a streamlined workflow
theater start manifest.toml --id-only | theater subscribe -
</code></pre>
</li>
<li>
<p>Restart an actor if issues occur</p>
<pre><code class="language-bash">theater restart &lt;actor-id&gt;
</code></pre>
</li>
</ol>
<h2 id="advanced-usage"><a class="header" href="#advanced-usage">Advanced Usage</a></h2>
<h3 id="http-actor-setup"><a class="header" href="#http-actor-setup">HTTP Actor Setup</a></h3>
<p>For HTTP actors:</p>
<ol>
<li>
<p>Create an HTTP actor project</p>
<pre><code class="language-bash">theater create my-http-actor --template http
</code></pre>
</li>
<li>
<p>Build and start</p>
<pre><code class="language-bash">cd my-http-actor
theater build
theater start manifest.toml
</code></pre>
</li>
<li>
<p>The HTTP server will be available at the port specified in the manifest</p>
</li>
</ol>
<h3 id="supervisor-pattern"><a class="header" href="#supervisor-pattern">Supervisor Pattern</a></h3>
<p>For parent-child actor relationships:</p>
<ol>
<li>Create parent and child actors</li>
<li>Configure the parent with supervisor capabilities</li>
<li>Start the parent actor</li>
<li>The parent can then spawn and manage child actors</li>
</ol>
<h2 id="new-advanced-commands"><a class="header" href="#new-advanced-commands">New Advanced Commands</a></h2>
<h3 id="inspecting-actors"><a class="header" href="#inspecting-actors">Inspecting Actors</a></h3>
<pre><code class="language-bash"># Inspect an actor in detail
theater inspect &lt;actor-id&gt;

# Show detailed view with full state and all events
theater inspect &lt;actor-id&gt; --detailed
</code></pre>
<h3 id="visualizing-actor-hierarchies"><a class="header" href="#visualizing-actor-hierarchies">Visualizing Actor Hierarchies</a></h3>
<pre><code class="language-bash"># View actor hierarchy as a tree
theater tree

# Limit tree depth
theater tree --depth 2

# Show tree starting from a specific actor
theater tree --root &lt;actor-id&gt;
</code></pre>
<h3 id="validating-manifests"><a class="header" href="#validating-manifests">Validating Manifests</a></h3>
<pre><code class="language-bash"># Validate an actor manifest
theater validate path/to/manifest.toml

# Validate with interface compatibility check
theater validate path/to/manifest.toml --check-interfaces
</code></pre>
<h3 id="interactive-shell"><a class="header" href="#interactive-shell">Interactive Shell</a></h3>
<p>Theater provides an interactive shell for working with actors:</p>
<pre><code class="language-bash"># Start the interactive shell
theater shell

# Connect to a custom server
theater shell --address 127.0.0.1:9001
</code></pre>
<p>In the shell, you can run commands like:</p>
<ul>
<li><code>list</code> - List all running actors</li>
<li><code>inspect &lt;id&gt;</code> - Show detailed information about an actor</li>
<li><code>state &lt;id&gt;</code> - Show the current state of an actor</li>
<li><code>events &lt;id&gt;</code> - Show events for an actor</li>
<li><code>start &lt;path&gt;</code> - Start an actor from a manifest</li>
<li><code>stop &lt;id&gt;</code> - Stop a running actor</li>
<li><code>restart &lt;id&gt;</code> - Restart a running actor</li>
<li><code>message &lt;id&gt; &lt;msg&gt;</code> - Send a message to an actor</li>
<li><code>clear</code> - Clear the screen</li>
<li><code>help</code> - Show help</li>
<li><code>exit</code> - Exit the shell</li>
</ul>
<h2 id="tips-and-tricks"><a class="header" href="#tips-and-tricks">Tips and Tricks</a></h2>
<ul>
<li>Use the <code>--verbose</code> flag for detailed output during commands</li>
<li>Use the <code>--json</code> flag to get structured output for scripting</li>
<li>For faster development, use the <code>watch</code> command for automatic redeployment</li>
<li>Use the <code>start --monitor</code> flag to start an actor and monitor its events in real-time</li>
<li>For more advanced event monitoring, use the <code>subscribe</code> command with filtering options</li>
<li>Combine commands with pipes: <code>theater start manifest.toml --id-only | theater subscribe -</code></li>
<li>The <code>subscribe</code> command supports various filtering options like <code>--event-type</code>, <code>--detailed</code>, and <code>--limit</code></li>
<li>Check <code>theater --help</code> and <code>theater &lt;command&gt; --help</code> for specific command options</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../user-guide/configuration.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../user-guide/troubleshooting.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../user-guide/configuration.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../user-guide/troubleshooting.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
