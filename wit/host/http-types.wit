package ntwk:theater;

/// Types used by the HTTP framework
interface http-types {
    use http-types.{http-request};
    
    /// Configuration for an HTTP server
    record server-config {
        /// Port to listen on, 0 means system-assigned
        port: option<u16>,
        /// Host address to bind to
        host: option<string>,
        /// TLS configuration
        tls-config: option<tls-config>,
    }
    
    /// TLS configuration
    record tls-config {
        /// Path to the certificate file
        cert-path: string,
        /// Path to the key file
        key-path: string,
    }
    
    /// Information about a server
    record server-info {
        /// Server ID
        id: u64,
        /// Current listening port
        port: u16,
        /// Host address
        host: string,
        /// Whether the server is running
        running: bool,
        /// Number of active routes
        routes-count: u32,
        /// Number of active middleware
        middleware-count: u32,
        /// Whether WebSocket is enabled
        websocket-enabled: bool,
    }
    
    /// Result from middleware processing
    record middleware-result {
        /// Whether to continue processing the request
        proceed: bool,
        /// The modified request
        request: http-request,
    }
}
